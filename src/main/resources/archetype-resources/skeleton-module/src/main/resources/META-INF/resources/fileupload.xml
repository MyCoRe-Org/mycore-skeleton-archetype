#set( $symbol_pound = '#' )
#set( $symbol_dollar = '$' )
#set( $symbol_escape = '\' )
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE MyCoReWebPage>

<MyCoReWebPage>

  <section title="Dateien oder Verzeichnisse hochladen" xml:lang="de" />
  <section title="Upload of files or directories" xml:lang="en" />

  <section xml:lang="all">

    <h1>Dateien oder Verzeichnisse hochladen</h1>

    <div id="fileUpload" role="tabpanel">

      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active" id="tabModern">
          <a href="${symbol_pound}modern" aria-controls="modern" role="tab" data-toggle="tab">Moderner Dateiupload</a>
        </li>
        <li role="presentation" id="tabClassic">
          <a href="${symbol_pound}classic" aria-controls="classic" role="tab" data-toggle="tab">Klassischer Dateiupload</a>
        </li>
      </ul>

      <div class="tab-content">

        <div role="tabpanel" class="tab-pane fade in active" id="modern">
          <fileupload2/>
        </div>

        <div role="tabpanel" class="tab-pane fade" id="classic">
          <form class="form-horizontal" action="servlets/MCRUploadViaFormServlet" method="post" enctype="multipart/form-data">

            <filetarget/>
            <fieldset>
              <legend class="mir-fieldset-legend">
                <i18n key="fileupload.titel"/>
              </legend>
              <div class="mir-fieldset-content">
                <div class="form-group">
                  <div class="col-md-3 control-label" />
                  <div class="col-md-6">
                    <div class="input-group">
                      <span class="input-group-btn">
                        <span class="btn btn-primary btn-file">
                          <i18n key="fileupload.browse"/>
                          <input name="filename[]" multiple="" type="file"/>
                        </span>
                      </span>
                      <input class="form-control" readonly="" type="text"/>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <a class="btn btn-default info-button" data-content="Bitte w�hlen sie die �ber den Durchsuchen Button die hochzuladenen Dateien aus. Es k�nnen auch mehre Dateien mit einmal ausgew�hlt werden." data-placement="right" data-toggle="popover" role="button" tabindex="0">
                      <i class="fa fa-info"></i>
                    </a>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-md-3 control-label" />
                  <div class="col-md-6">
                    <div class="input-group">
                      <span class="input-group-btn">
                        <span class="btn btn-primary btn-file">
                          <i18n key="fileupload.browse"/>
                          <input name="filename[]" multiple="" type="file"/>
                        </span>
                      </span>
                      <input class="form-control" readonly="" type="text"/>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-md-3 control-label" />
                  <div class="col-md-6">
                    <div class="input-group">
                      <span class="input-group-btn">
                        <span class="btn btn-primary btn-file">
                          <i18n key="fileupload.browse"/>
                          <input name="filename[]" multiple="" type="file"/>
                        </span>
                      </span>
                      <input class="form-control" readonly="" type="text"/>
                    </div>
                  </div>
                </div>
              </div>
            </fieldset>

            <div class="col-md-6 col-md-offset-3">
              <p class="text-warning">
                <i18n key="fileupload.warning" />
              </p>
            </div>

            <div class="col-md-offset-2 col-md-6">
              <button class="btn btn-default">
                Abbrechen
              </button>
              <button type="submit" class="btn btn-primary">
                Hochladen
              </button>
            </div>
            <script>
               ${symbol_dollar}(document).on('change', '.btn-file :file', function () {
                  var input = ${symbol_dollar}(this), numFiles = input.get(0).files ? input.get(0).files.length : 1, label = input.val().replace(/${symbol_escape}${symbol_escape}/g, '/').replace(/.*${symbol_escape}//, '');
                  input.trigger('fileselect', [
                    numFiles,
                     label
                  ]);
                });
                ${symbol_dollar}(document).ready(function () {
                  ${symbol_dollar}('.btn-file :file').on('fileselect', function (event, numFiles, label) {
                    var input = ${symbol_dollar}(this).parents('.input-group').find(':text'), log = numFiles > 1 ? numFiles + ' files selected' : label;
                    if (input.length) {
                      input.val(log);
                    }
                  });
                });
                //${symbol_pound} sourceURL=pen.js
            </script>

          </form>
        </div>
      </div>
    </div>
    <script>
        ${symbol_dollar}(document).ready(function(){
          ${symbol_dollar}('[data-toggle="popover"]').popover();
        });
    </script>
  </section>
</MyCoReWebPage>
